{% extends "base.html" %}
{%load static%}
{% load widget_tweaks %}
{% block page_title %}Change password - B&A{% endblock %}
{% block content %}
<!-- <div style="margin-top: 30px; margin-left: auto; margin-right: auto;" class="apartment item"> -->

<div class="container-fluid">
  <div class="row">
    <div class="col-lg-4 offset-lg-4 col-sm-6 col-xs-8">
      <div style="margin-top: 39px; margin-bottom: 39px;" class="sidebar_title">Change password</div>
      <form class="" method="post">

        {%csrf_token%}
        <div>
          <!-- old_password -->
          <div style="margin-bottom: 18px">
            {% render_field form.old_password class="contact_input" placeholder="Your old password" %}
            <div class="input_border"></div>
          </div>
          {% if form.old_password.errors %}
          <div class="alert alert-warning">
            <ul>
              {% for error in form.old_password.errors %}
              <li>{{ error }}</li>
              {% endfor %}
            </ul>
          </div>
          {% endif %}

          <!-- new_password1 -->
          <div style="margin-bottom: 18px">
            {% render_field form.new_password1 class="contact_input" placeholder="Your new password" %}
            <div class="input_border"></div>
          </div>
          {% if form.new_password1.errors %}
          <div class="alert alert-warning">
            <ul>
              {% for error in form.new_password1.errors %}
              <li>{{ error }}</li>
              {% endfor %}
            </ul>
          </div>
          {% endif %}

          <!-- new_password2 -->
          <div style="margin-bottom: 18px">
            {% render_field form.new_password2 class="contact_input" placeholder="Confirm your new password" %}
            <div class="input_border"></div>
          </div>
          {% if form.new_password2.errors %}
          <div class="alert alert-warning">
            <ul>
              {% for error in form.new_password2.errors %}
              <li>{{ error }}</li>
              {% endfor %}
            </ul>
          </div>
          {% endif %}

        </div>
        <button type="submit" class="contact_button">Change password</button>

      </form>
    </div>
  </div>
</div>

{% endblock %}

{% block main_js%}
<script>
  var password = document.getElementById("id_new_password1"),
    confirm_password = document.getElementById("id_new_password2");

  function validatePassword() {
    if (password.value != confirm_password.value) {
      confirm_password.setCustomValidity("Passwords Don't Match");
    } else {
      confirm_password.setCustomValidity('');
    }
  }

  // $("#id_password1").on("change") = validatePassword;
  password.onchange = validatePassword;
  // $("#id_password2").on("keyup") = validatePassword;
  confirm_password.onkeyup = validatePassword;
</script>
{% endblock %}

{% block footer%}
{% endblock %}
